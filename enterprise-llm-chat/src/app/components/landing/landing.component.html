<div class="landing-container">
  <button mat-button class="shannon-button" 
    data-testid="shannon-button"
    (mouseenter)="toggleDashboard(true)"    
    >
    Shannon
  </button>
  <app-side-dashboard 
    [isOpen]="isDashboardOpen" 
    [class.active]="isDashboardOpen"
    (closePanel)="toggleDashboard(false)"
    data-testid="side-dashboard"
    >
  </app-side-dashboard>
  <div class="greeting-section">
    <h1>Good {{ getTimeOfDay() }}, {{ firstName }}</h1>
    <p class="subtitle">How can I help you today?</p>
  </div>

  <div class="chat-input-section">
    <textarea 
      #landingInput
      [(ngModel)]="userInput" 
      placeholder="Message..." 
      (keydown.enter)="$event.preventDefault(); onSubmit()"
      (input)="adjustTextareaHeight(landingInput)"
      rows="1"
      class="landing-input"
    ></textarea>
    <input type="file" accept=".txt,.doc,.jpg,.jpeg,.png" (change)="handleFileInput($event)" class="file-input" id="landingFileInput" data-testid="landing-file-input" />
    <label for="landingFileInput" class="file-label" [class.disabled]="isSaving" data-testid="landing-file-label">
      <mat-icon>attach_file</mat-icon>
    </label>
    <button (click)="onSubmit()" class="submit-button">
      <span class="material-icons">send</span>
    </button>
  </div>

  <div class="recent-conversations">
    <div *ngIf="isLoading" class="loading-spinner-container">
      <mat-spinner diameter="40" data-testid="conversation-loading-spinner"></mat-spinner>
    </div>

    <div *ngIf="!isLoading">
      <h2 *ngIf="recentConversations.length > 0">Recent Conversations</h2>
      <div class="conversation-grid">
        <app-conversation-card
          *ngFor="let conversation of recentConversations"
          [conversation]="conversation"
          [messagePreviewLength]="20"
          (cardClick)="onConversationClick(conversation.conversation_id || '')"
          data-testid="conversation-card">
        </app-conversation-card>
      </div>
    </div>
  </div>
</div> 