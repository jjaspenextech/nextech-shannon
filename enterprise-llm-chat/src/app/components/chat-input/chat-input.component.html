<div class="flex flex-col gap-4 p-4 border rounded-lg shadow-sm">
  <!-- Context Preview -->
  <div *ngIf="contexts.length > 0" class="flex flex-wrap gap-2">
    <div *ngFor="let context of contexts; let i = index" 
         class="flex items-center gap-2 px-3 py-1 bg-gray-100 rounded-full">
      <span class="text-sm">{{context.type}}: {{context.content | slice:0:20}}...</span>
      <button (click)="removeContext(i)" 
              class="text-red-500 hover:text-red-700">
        Ã—
      </button>
    </div>
  </div>

  <!-- Input Area -->
  <div class="flex gap-2">
    <textarea
      [(ngModel)]="messageContent"
      placeholder="Type your message..."
      class="flex-grow p-2 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"
      rows="3"
    ></textarea>

    <div class="flex flex-col gap-2">
      <input
        type="file"
        #fileInput
        (change)="onFileSelected($event)"
        class="hidden"
      />
      
      <button
        (click)="fileInput.click()"
        class="p-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200"
        title="Attach file"
      >
        ðŸ“Ž
      </button>

      <button
        (click)="sendMessage()"
        [disabled]="!messageContent.trim()"
        class="p-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 disabled:bg-gray-300"
      >
        âž¤
      </button>
    </div>
  </div>
</div>
