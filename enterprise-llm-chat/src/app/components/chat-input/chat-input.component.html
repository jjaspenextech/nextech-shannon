<div class="flex-col">
  <!-- Context Preview -->
  <div *ngIf="contexts.length > 0" class="context-preview">
    <div *ngFor="let context of contexts; let i = index" class="context-item">
      <span class="text-sm">{{context.type}}: {{context.content | slice:0:20}}...</span>
      <button (click)="removeContext(i)">Ã—</button>
    </div>
  </div>

  <div class="chat-input-section">
    <textarea
      [(ngModel)]="messageContent"
      placeholder="Message..."
      class="landing-input"
      rows="1"
      #messageInput
      data-testid="chat-input"
    ></textarea>

    <input
      type="file"
      #fileInput
      (change)="onFileSelected($event)"
      class="file-input"
      data-testid="file-input"
    />
    
    <label 
      for="fileInput" 
      class="file-label"
      (click)="fileInput.click()"
    >
      <span class="material-icons">attach_file</span>
    </label>

    <button
      (click)="sendMessage()"
      [disabled]="!messageContent.trim()"
      class="submit-button"
      data-testid="send-button"
    >
      <span class="material-icons">send</span>
    </button>
  </div>
</div>
